<div th:fragment="content" class="container-fluid px-4">
    <div class="card mb-4">
        <div class="card-header d-flex">
            <!-- Barra de búsqueda a la izquierda -->
            <div class="me-auto">
                <form class="d-none d-md-inline-block form-inline my-2 my-md-0"
                      th:hx-post="@{/formaciones/buscar}"
                      hx-trigger="submit" hx-target="#Cuerpo" hx-swap="innerHTML">
                    <div class="input-group">
                        <input
                                class="form-control"
                                type="text"
                                name="query"
                                placeholder="Search for..."
                                aria-label="Search for..."
                                aria-describedby="btnSearch"/>
                        <button
                                class="btn btn-primary"
                                id="btnSearch"
                                type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Enlaces a la derecha -->
            <div class="d-flex text-end align-items-center">
                <a class="nav-link me-3"
                   th:hx-post="@{/cabecera(url='formaciones/nueva', titulo='Nueva Formación')}"
                   hx-target="#Main" hx-swap="innerHTML">
                    <i class="fas fa-add me-1"></i>
                    Nueva formación
                </a>
                <a class="nav-link me-3" hidden="hidden">
                    <i class="fas fa-print me-1"></i>
                    Imprimir
                </a>
            </div>
        </div>
        <div class="card-body">
            <table id="tablaFormaciones" class="table table-striped table-bordered">
                <colgroup>
                    <col style="width: 10%;">  <!-- Primera columna -->
                    <col style="width: 35%;"> <!-- Segunda columna -->
                    <col style="width: 20%;"> <!-- Tercera columna -->
                    <col style="width: 35%;"> <!-- Cuarta  columna -->
                    <col style="width: 10%;"> <!-- Columna de acciones -->
                    <col style="width: 10%;"> <!-- Columna de acciones -->
                    <col style="width: 10%;"> <!-- Columna de acciones -->
                </colgroup>
                <thead>
                <tr>
                    <th scope="col">Nº Formación</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Grupo de edad</th>
                    <th scope="col">Encargados</th>
                    <th><em>Editar</em></th>
                    <th><em>Eliminar</em></th>
                    <th><em>Imprimir</em></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="formacion : ${formaciones}">
                    <td th:text="${formacion.numero}">Nº Formación</td>
                    <td th:text="${formacion.titulo}">Nombre</td>
                    <td th:text="${formacion.grupo_edad}">Grupo de edad</td>
                    <td>
                        <span th:each="encargado : ${formacion.encargados}"
                              th:text="${encargado.id} + ', '">
                        </span>
                    </td>
                    <td class="text-end"
                        th:hx-post="@{/cabecera(url='formaciones/editar', titulo='Editar Formación', id=${formacion.id})}"
                        hx-target="#Main" hx-swap="innerHTML">
                        <a class="nav-link me-3">
                            <i class="fas fa-pencil me-1"></i>
                        </a>
                    </td>
                    <td class="text-end">
                        <a class="nav-link me-3" data-bs-toggle="modal"
                           th:data-bs-target="'#modalEliminarFormacion' + ${formacion.id}">
                            <i class="fas fa-trash me-1"></i>
                        </a>

                        <!-- Modal -->
                        <div th:hx-post="@{/modals/formacion/eliminar(id=${formacion.id}, titulo=${formacion.titulo})}"
                             hx-trigger="load" hx-target="this" hx-swap="outerHTML"></div>
                    </td>
                    <td class="text-end">
                        <a class="nav-link me-3"
                           th:href="@{/pdfs/generar/Formacion/{id}(id=${formacion.id})}"
                           target="_blank">
                            <i class="fas fa-print me-1"></i>
                        </a>
                    </td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <th scope="col">Nº Formación </th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Grupo de edad</th>
                    <th scope="col">Encargados</th>
                    <th><em>Editar</em></th>
                    <th><em>Eliminar</em></th>
                    <th><em>Imprimir</em></th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>


